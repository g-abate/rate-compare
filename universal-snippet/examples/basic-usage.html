<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rate Compare - Basic Usage Example</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        
        .example-section {
            margin: 40px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        
        .date-inputs {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            align-items: center;
        }
        
        .date-inputs input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        button {
            background: #007cba;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        button:hover {
            background: #005a87;
        }
        
        .code-block {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <h1>Rate Compare Universal Snippet - Basic Usage</h1>
    
    <div class="example-section">
        <h2>1. Inline Widget Example</h2>
        <p>This example shows how to use the rate comparison widget in inline mode.</p>
        
        <div class="date-inputs">
            <label>
                Check-in:
                <input type="date" id="checkin-inline" value="2024-01-15">
            </label>
            <label>
                Check-out:
                <input type="date" id="checkout-inline" value="2024-01-17">
            </label>
            <button onclick="fetchRatesInline()">Compare Rates</button>
        </div>
        
        <div id="inline-widget"></div>
    </div>
    
    <div class="example-section">
        <h2>2. Floating Widget Example</h2>
        <p>This example shows how to use the rate comparison widget in floating mode.</p>
        
        <div class="date-inputs">
            <label>
                Check-in:
                <input type="date" id="checkin-floating" value="2024-01-20">
            </label>
            <label>
                Check-out:
                <input type="date" id="checkout-floating" value="2024-01-22">
            </label>
            <button onclick="fetchRatesFloating()">Compare Rates</button>
        </div>
    </div>
    
    <div class="example-section">
        <h2>3. Code Example</h2>
        <p>Here's how to integrate the Rate Compare snippet into your website:</p>
        
        <div class="code-block">
&lt;script src="https://cdn.example.com/rate-compare.umd.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
  // Initialize the snippet
  const snippet = new RateCompare.RateComparisonSnippet({
    propertyId: 'your-property-id',
    channels: ['airbnb', 'vrbo', 'booking'],
    displayMode: 'inline',
    theme: 'light'
  });
  
  // Initialize the widget
  await snippet.init();
  
  // Fetch rates for specific dates
  await snippet.fetchRates('2024-01-15', '2024-01-17');
&lt;/script&gt;
        </div>
    </div>
    
    <!-- Load the Rate Compare snippet -->
    <script src="../dist/rate-compare.umd.js"></script>
    
    <script>
        // Initialize inline widget
        const inlineSnippet = new RateCompare.RateComparisonSnippet({
            propertyId: 'demo-property-123',
            channels: ['airbnb', 'vrbo', 'booking'],
            displayMode: 'inline',
            theme: 'light'
        });
        
        // Initialize floating widget
        const floatingSnippet = new RateCompare.RateComparisonSnippet({
            propertyId: 'demo-property-456',
            channels: ['airbnb', 'vrbo'],
            displayMode: 'floating',
            theme: 'dark'
        });
        
        // Initialize both widgets
        async function initializeWidgets() {
            try {
                await inlineSnippet.init();
                await floatingSnippet.init();
                console.log('Rate Compare widgets initialized successfully');
            } catch (error) {
                console.error('Failed to initialize widgets:', error);
            }
        }
        
        // Fetch rates for inline widget
        async function fetchRatesInline() {
            const checkIn = document.getElementById('checkin-inline').value;
            const checkOut = document.getElementById('checkout-inline').value;
            
            if (!checkIn || !checkOut) {
                alert('Please select both check-in and check-out dates');
                return;
            }
            
            try {
                await inlineSnippet.fetchRates(checkIn, checkOut);
            } catch (error) {
                console.error('Failed to fetch rates:', error);
                alert('Failed to fetch rates. Please try again.');
            }
        }
        
        // Fetch rates for floating widget
        async function fetchRatesFloating() {
            const checkIn = document.getElementById('checkin-floating').value;
            const checkOut = document.getElementById('checkout-floating').value;
            
            if (!checkIn || !checkOut) {
                alert('Please select both check-in and check-out dates');
                return;
            }
            
            try {
                await floatingSnippet.fetchRates(checkIn, checkOut);
            } catch (error) {
                console.error('Failed to fetch rates:', error);
                alert('Failed to fetch rates. Please try again.');
            }
        }
        
        // Initialize widgets when page loads
        document.addEventListener('DOMContentLoaded', initializeWidgets);
        
        // Add event listeners for demo
        inlineSnippet.on('ready', () => {
            console.log('Inline widget is ready');
        });
        
        inlineSnippet.on('rates-loaded', (rates) => {
            console.log('Rates loaded for inline widget:', rates);
        });
        
        inlineSnippet.on('error', (error) => {
            console.error('Inline widget error:', error);
        });
        
        floatingSnippet.on('ready', () => {
            console.log('Floating widget is ready');
        });
        
        floatingSnippet.on('rates-loaded', (rates) => {
            console.log('Rates loaded for floating widget:', rates);
        });
        
        floatingSnippet.on('error', (error) => {
            console.error('Floating widget error:', error);
        });
    </script>
</body>
</html>
